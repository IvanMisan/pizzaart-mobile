<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    
    <ion-title>{{ 'menuTitle' | translate }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="openLanguagePopover($event)">
        <img [src]="'assets/flags/' + currentLang + '.png'" alt="flag" class="flag-icon" />
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-card *ngFor="let pizza of pizzas">
      <img [src]="pizza.img" />
      <ion-card-header>
        <ion-card-title>{{ pizza.name }}</ion-card-title>
        <ion-card-subtitle>{{ pizza.price }} ₴</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>{{ pizza.description }}</p>
        <ion-button expand="block" (click)="addToCart(pizza)">
          {{ 'addButton' | translate }}
        </ion-button>
      </ion-card-content>
    </ion-card>
  </ion-list>

  <ion-card>
    <ion-card-header>
      <ion-card-title>{{ 'cart.title' | translate }}: {{ cart.length }}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p *ngIf="cart.length === 0">{{ 'cart.empty' | translate }}</p>
      <ion-list *ngIf="cart.length > 0">
        <ion-item *ngFor="let item of cart; let i = index">
          {{ item.name }} — {{ item.price }} ₴
          <ion-button fill="clear" color="danger" slot="end" (click)="removeFromCart(i)">
            {{ 'cart.remove' | translate }}
          </ion-button>
        </ion-item>
      </ion-list>
      <p *ngIf="cart.length > 0">{{ 'cart.total' | translate }}: {{ getTotal() }} ₴</p>
      <ion-button *ngIf="cart.length > 0" expand="block" (click)="goToCheckout()">
        {{ 'cart.checkout' | translate }}
      </ion-button>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header>
      <ion-card-title>{{ 'orders.title' | translate }}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-button expand="block" routerLink="/order-history">
        {{ 'orders.historyButton' | translate }}
      </ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>